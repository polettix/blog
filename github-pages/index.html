<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>GitHub Pages &#8211; PolettiX!</title>
<meta name="description" content="I recently decided that I should probably write more. GitHub Pages
is a good place where to store what I write.

">
<meta name="keywords" content="">



<!-- Twitter Cards -->
<meta name="twitter:title" content="GitHub Pages">
<meta name="twitter:description" content="I recently decided that I should probably write more. GitHub Pages
is a good place where to store what I write.

">
<meta name="twitter:site" content="@polettix">
<meta name="twitter:creator" content="@polettix">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="/images/leaves.jpg">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="GitHub Pages">
<meta property="og:description" content="I recently decided that I should probably write more. GitHub Pages
is a good place where to store what I write.

">
<meta property="og:url" content="/github-pages/">
<meta property="og:site_name" content="PolettiX!">





<link rel="canonical" href="/github-pages/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="PolettiX! Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
	<script src="/assets/js/vendor/html5shiv.min.js"></script>
	<script src="/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<link href='//fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700%7CPT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico?whatever">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png?whatever">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

</head>

<body class="post">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<!-- a href="/">PolettiX!</a -->
      <a href="/"><img style="height: 1.2em" src="/images/polettix.png" alt="PolettiX!"></a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" id="site-nav" class="nav">
		    <ul>
		        
				    
				        
				    
				    <li><a href="/about/" >About</a></li>
				
				    
				        
				    
				    <li><a href="/posts/" >Posts</a></li>
				
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->



  <div class="image-wrap">
  <img src=
    
      "/images/leaves.jpg"
    
  alt="GitHub Pages feature image">
  
    <span class="image-credit"><a href="https://it.wikipedia.org/wiki/Tevere">Foglie sul Lungo Tevere</a></span>
  
  </div><!-- /.image-wrap -->


<div id="main" role="main">
  <div class="article-author-side">
    


<div itemscope itemtype="http://schema.org/Person">


	<img src="/images/flavio-self-color.png" class="bio-photo" alt="Flavio Poletti bio photo">


  <h3 itemprop="name">Flavio Poletti</h3>
  <p>Irreducible Perler.</p>
  <a href="mailto:flavio@polettix.it" class="author-social" target="_blank"><i class="fa fa-fw fa-envelope-square"></i>Email</a>
  <a href="http://comics.polettix.it/" class="author-social" target="_blank"><i class="fa fa-fw fa-pencil"></i> Comics</a>
  <a href="http://twitter.com/polettix" class="author-social" target="_blank"><i class="fa fa-fw fa-twitter-square"></i> Twitter</a>
  
  
  <a href="http://linkedin.com/in/flaviopoletti" class="author-social" target="_blank"><i class="fa fa-fw fa-linkedin-square"></i> LinkedIn</a>
  
  
  <a href="https://metacpan.org/author/polettix" class="author-social" target="_blank"><i class="fa fa-fw fa-th-large"></i> MetaCPAN</a>
  <a href="http://github.com/polettix" class="author-social" target="_blank"><i class="fa fa-fw fa-github"></i> Github</a>
  <a href="http://stackoverflow.com/users/3865403/polettix" class="author-social" target="_blank"><i class="fa fa-fw fa-stack-overflow"></i> Stackoverflow</a>
  
  
  <a href="http://www.pinterest.com/polettix" class="author-social" target="_blank"><i class="fa fa-fw fa-pinterest"></i> Pinterest</a>
  
  
  
  
  
  
</div>

  </div>
  <article class="post">
    <div class="headline-wrap">
      
        <h1><a href="/github-pages/" rel="bookmark" title="GitHub Pages">GitHub Pages</a></h1>
      
    </div><!--/ .headline-wrap -->
    <div class="article-wrap">
      <p>I recently decided that I should probably write more. <a href="https://pages.github.com/">GitHub Pages</a>
is a good place where to store what I write.</p>

<h2 id="what-is-github-pages">What Is GitHub Pages</h2>

<p><a href="https://pages.github.com/">GitHub Pages</a> is a service provided by GitHub to host… pages. It is
a great way to add a website to a project hosted on GitHub, and also
quite simple to do by using git. The idea is that you create a
dedicated <em>branch</em> in your project repository, called <code>gh-pages</code>, and
put the website there. GitHub is then smart enough to take the contents
from that branch and expose them on the Internet at the right address.</p>

<p>If your nickname on GitHub is <code>mynick</code>, and the project is called
<code>myproject</code>, then:</p>

<ul>
  <li>the project will be at <code>https://github.com/mynick/myproject</code></li>
  <li>its pages will be at <code>http://mynick.github.io/myproject</code></li>
</ul>

<p>For example, my repository for the <a href="https://github.com/polettix/Graphics-Potrace">Potrace</a> Perl bindings has:</p>

<ul>
  <li>project repository at address
<a href="https://github.com/polettix/Graphics-Potrace"><code>https://github.com/polettix/Graphics-Potrace</code></a></li>
  <li>its associated page(s) at address
<a href="http://polettix.github.io/Graphics-Potrace"><code>http://polettix.github.io/Graphics-Potrace</code></a></li>
</ul>

<h2 id="project-or-userassociation">Project or User/Association?</h2>

<p>What written above is fine for projects hosted on GitHub. As a matter
of fact, there is also a <em>standardized</em> way to have similar pages for
a user or an organization.</p>

<p>There is a slight inconsistency in how the thing is handled though:</p>

<ul>
  <li>it still relies on a GitHub project - good</li>
  <li>the GitHub project MUST have a specific name, e.g.
<code>mynick.github.io</code> - still good</li>
  <li>the pages are hosted in the <code>master</code> branch instead of
<code>gh-pages</code> - this is a bummer!</li>
</ul>

<h2 id="blog">Blog?</h2>

<p>With the tools above - especially considering the pages for a user
or an association - it is easy to think about hosting a blog on GitHub.
We will assume that it is hosted as a project by itself, not the one
for the user/association above (although you can easily tweak the
instructions below to make it happen).</p>

<p>The basic idea is that keeping a blog’s pages is too cumbersome to
be done manually. You will probably want to provide a consistent look,
with all headers, navigation, sides, footers… all the bells and
whistles.</p>

<p>One of the best approaches to take is to use some blog
generation system - we’ll use <a href="http://jekyllrb.com/">Jekyll</a> here - so that we can concentrate
on writing the stuff, and let the system do the heavy lifting to generate
the final pages. Hence, it makes sense to consider the blog from two
points of view:</p>

<ul>
  <li>the generating system where you put your articles in</li>
  <li>the final generated site</li>
</ul>

<p>This fits perfectly with GitHub: you can keep the generating system
as <em>the project</em>, and its associated GitHub Pages as the real blog that
is served on the Internet.</p>

<h2 id="lets-start">Let’s Start!</h2>

<p>I set up my blog infrastructure using <a href="http://jekyllrb.com/">Jekyll</a>. After installing it,
create your new blog like this:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">jekyll new myblog
<span class="nb">cd </span>myblog
git init
git add .
git commit -m <span class="s1">&#39;initial import&#39;</span></code></pre></div>

<p>Now you have your local repository for the blog. At this point, you
are ready for creating a new repository in GitHub (let’s call it
<code>myblog</code> in user <code>mynick</code>) and tie them up:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">git remote add origin git@github.com:mynick/myblog.git
git push -u origin master</code></pre></div>

<p>It’s time to start generating pages at this point. Depending on how
you installed <a href="http://jekyllrb.com/">Jekyll</a> or whatever different, you might have to use
<code>bundle</code>, which is what we will assume here:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">bundle <span class="nb">exec </span>jekyll build</code></pre></div>

<p>Now the generated stuff will live inside the <code>_site</code> subdirectory. This
should be already included inside the <code>.gitignore</code> file generated by
Jekyll automatically, but in case it’s a good moment for doing this.</p>

<p>The suggestion is that the <code>master</code> and <code>gh-pages</code> branches are really
separated from one another. Again, there might be many ways to do this,
I’m just providing you one here:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">git checkout master
git checkout --orphan gh-pages
git rm -rf .</code></pre></div>

<p>At this point you should still have the <code>_site</code> directory lying around,
and this is where the real contents of your site actually are. A basic
strategy can be to just copy the contents of that directory inside the
root directory of the repository:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">tar cf - -C _sites . <span class="p">|</span> tar xvf -
git add .
git commit -m <span class="s1">&#39;gh-pages initial import&#39;</span>
git push origin gh-pages:gh-pages</code></pre></div>

<p>There you go, your blog is online!</p>

<h2 id="routine-workflow">Routine Workflow</h2>

<p>What’s the workflow from now on? You will normally work in the <code>master</code>
branch - we set all this up for this reason, actually - and will switch
on the <code>gh-pages</code> branch only when needed.</p>

<p>Adding posts or pages in Jekyll is quite easy and there is plenty of
documentation. When you’re done, make sure you are in the <code>master</code>
branch and that changes are committed, otherwise you will not be able
to switch to the <code>gh-pages</code> branch later on. It’s OK to have files that
are not yet onboarded in GitHub though, <code>git</code> will not complain about
them.</p>

<p>At this point, you have to follow these steps:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">bundle <span class="nb">exec </span>jekyll build
git checkout gh-pages
tar cf - -C _sites . <span class="p">|</span> tar xvf -
git add .
git commit -m <span class="k">$(</span>date <span class="s1">&#39;+blog status at %Y%m%d-%H%M%S&#39;</span><span class="k">)</span>
git push origin gh-pages:gh-pages
git checkout master</code></pre></div>

<p>The copy using <code>tar</code> is effective although not completely correct. In
particular, it will not take into consideration things that you <em>delete</em>,
because all items will be added to what is already saved and committed.
In general this should not be a problem though, because you will mostly
be adding things, will you not?</p>

<p>A better strategy is to use <code>git ls-files</code> to list all files and remove
most of them before doing the copy with <code>tar</code>. We should not get rid of
all of them though, because some might be important for the generic
<em>management</em> of the pages (e.g. the <code>.gitignore</code> file). We will assume
that there are no files with spaces, so this will work:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">bundle <span class="nb">exec </span>jekyll build
git checkout gh-pages
rm <span class="k">$(</span>git ls-files <span class="p">|</span> grep -v <span class="s1">&#39;^\.gitignore$&#39;</span><span class="k">)</span>
tar cf - -C _sites . <span class="p">|</span> tar xvf -
git add .
git commit -m <span class="k">$(</span>date <span class="s1">&#39;+blog status at %Y%m%d-%H%M%S&#39;</span><span class="k">)</span>
git push origin gh-pages:gh-pages
git checkout master</code></pre></div>

<p>I eventually put the commands above in <code>publish.sh</code> file:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c">#!/bin/bash</span>
<span class="nv">MYDIR</span><span class="o">=</span><span class="k">$(</span>dirname <span class="s2">&quot;$0&quot;</span><span class="k">)</span>
<span class="nv">FULLME</span><span class="o">=</span><span class="k">$(</span>readlink -f <span class="s2">&quot;$0&quot;</span><span class="k">)</span>
<span class="nv">BAREME</span><span class="o">=</span><span class="k">$(</span>basename <span class="s2">&quot;$0&quot;</span><span class="k">)</span>

die<span class="o">()</span> <span class="o">{</span>
   <span class="nb">echo</span> <span class="s2">&quot;$*&quot;</span> &gt;<span class="p">&amp;</span>2
   <span class="nb">exit </span>1
<span class="o">}</span>

main<span class="o">()</span> <span class="o">{</span>
   <span class="nb">cd</span> <span class="s2">&quot;$MYDIR&quot;</span> <span class="o">||</span> die <span class="s2">&quot;unable to go in $MYDIR&quot;</span>
   <span class="nb">cd</span> .. <span class="o">||</span> die <span class="s2">&quot;unable to go in parent directory of $MYDIR&quot;</span>
   <span class="nb">echo</span> <span class="s2">&quot;in $PWD now&quot;</span>

   git checkout master <span class="o">||</span> die <span class="s1">&#39;unable to switch to master&#39;</span>
   bundle <span class="nb">exec </span>jekyll build <span class="o">||</span> die <span class="s2">&quot;unable to update contents&quot;</span>
   git checkout gh-pages <span class="o">||</span> die <span class="s1">&#39;unable to switch to gh-pages&#39;</span>
   tar cf - -C _site . <span class="p">|</span> tar xvf - <span class="se">\</span>
   <span class="o">&amp;&amp;</span> git add . <span class="se">\</span>
   <span class="o">&amp;&amp;</span> git commit -m <span class="s2">&quot;$(date &#39;+update at %Y%m%d-%H%M%S&#39;)&quot;</span> <span class="se">\</span>
   <span class="o">&amp;&amp;</span> git push origin gh-pages
   git checkout master <span class="o">||</span> die <span class="s1">&#39;unable to switch to master&#39;</span>
<span class="o">}</span>

main</code></pre></div>

<p>I’m not an expert on this, but it’s very probable that without resorting to
the trick of defining a function <code>main</code> and calling it, things might go
very wrong in the execution of the script, because the script will live
in the <code>master</code> branch but it might be unavailable in branch <code>gh-pages</code>.</p>

      <hr />
      <footer role="contentinfo">
        <div class="social-share">
  <h4>Share on</h4>
  <ul>
    <li>
      <a href="https://twitter.com/intent/tweet?text=/github-pages/" class="twitter" title="Share on Twitter"><i class="fa fa-twitter"></i><span> Twitter</span></a>
    </li>
    <li>
      <a href="https://www.facebook.com/sharer/sharer.php?u=/github-pages/" class="facebook" title="Share on Facebook"><i class="fa fa-facebook"></i><span> Facebook</span></a>
    </li>
    <li>
      <a href="https://plus.google.com/share?url=/github-pages/" class="google-plus" title="Share on Google Plus"><i class="fa fa-google-plus"></i><span> Google+</span></a>
    </li>
  </ul>
</div><!-- /.social-share -->
        <p class="byline"><strong>GitHub Pages</strong> was published on <time datetime="2015-02-04T00:00:00+01:00">February 04, 2015</time>.</p>
      </footer>
    </div><!-- /.article-wrap -->
  
    <section id="disqus_thread"></section><!-- /#disqus_thread -->
  
  </article>
</div><!-- /#main -->

<div class="footer-wrap">
  <div class="related-articles">
  <h4>You might also enjoy <small class="pull-right">(<a href="/posts/">View all posts</a>)</small></h4>
    <ul>
    
      <li><a href="/dibs-saga/" title="Dibs Saga">Dibs Saga</a></li>
    
      <li><a href="/dibs-envars-envisaged-as-enviles/" title="Dibs - Envars Envisaged As Enviles">Dibs - Envars Envisaged As Enviles</a></li>
    
      <li><a href="/dibs-remote-packs/" title="Dibs - Remote Packs">Dibs - Remote Packs</a></li>
    
    </ul>
    <hr />
  </div><!-- /.related-articles -->
  <footer>
    

<span>&copy; 2019 Flavio Poletti. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="http://mademistakes.com/minimal-mistakes/" rel="nofollow">Minimal Mistakes</a> theme.</span>

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>


  
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'polettix'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>



</body>
</html>
