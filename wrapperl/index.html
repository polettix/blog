<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Wrapper...l &#8211; PolettiX!</title>
<meta name="description" content="wrapperl is a (Perl) program lets you wrap another Perl program
with some local-specific configurations.

">
<meta name="keywords" content="">



<!-- Twitter Cards -->
<meta name="twitter:title" content="Wrapper...l">
<meta name="twitter:description" content="wrapperl is a (Perl) program lets you wrap another Perl program
with some local-specific configurations.

">
<meta name="twitter:site" content="@polettix">
<meta name="twitter:creator" content="@polettix">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="/images/kakadu-on-yellow-river.jpg">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Wrapper...l">
<meta property="og:description" content="wrapperl is a (Perl) program lets you wrap another Perl program
with some local-specific configurations.

">
<meta property="og:url" content="/wrapperl/">
<meta property="og:site_name" content="PolettiX!">





<link rel="canonical" href="/wrapperl/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="PolettiX! Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
	<script src="/assets/js/vendor/html5shiv.min.js"></script>
	<script src="/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<link href='//fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700%7CPT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico?whatever">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png?whatever">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="post">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="/">PolettiX!</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" id="site-nav" class="nav">
		    <ul>
		        
				    
				        
				    
				    <li><a href="/about/" >About</a></li>
				
				    
				        
				    
				    <li><a href="/posts/" >Posts</a></li>
				
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->


  <div class="image-wrap">
  <img src=
    
      "/images/kakadu-on-yellow-river.jpg"
    
  alt="Wrapper...l feature image">
  
    <span class="image-credit"><a href="https://en.wikipedia.org/wiki/Kakadu_National_Park">Yellow Water al Kakadu National Park, Australia</a></span>
  
  </div><!-- /.image-wrap -->


<div id="main" role="main">
  <div class="article-author-side">
    


<div itemscope itemtype="http://schema.org/Person">


	<img src="/images/flavio-self-color.png" class="bio-photo" alt="Flavio Poletti bio photo">


  <h3 itemprop="name">Flavio Poletti</h3>
  <p>Irreducible Perler.</p>
  <a href="mailto:flavio@polettix.it" class="author-social" target="_blank"><i class="fa fa-fw fa-envelope-square"></i>Email</a>
  <a href="http://comics.polettix.it/" class="author-social" target="_blank"><i class="fa fa-fw fa-pencil"></i> Comics</a>
  <a href="http://twitter.com/polettix" class="author-social" target="_blank"><i class="fa fa-fw fa-twitter-square"></i> Twitter</a>
  
  
  <a href="http://linkedin.com/in/flaviopoletti" class="author-social" target="_blank"><i class="fa fa-fw fa-linkedin-square"></i> LinkedIn</a>
  
  
  <a href="https://metacpan.org/author/polettix" class="author-social" target="_blank"><i class="fa fa-fw fa-th-large"></i> MetaCPAN</a>
  <a href="http://github.com/polettix" class="author-social" target="_blank"><i class="fa fa-fw fa-github"></i> Github</a>
  <a href="http://stackoverflow.com/users/3865403/polettix" class="author-social" target="_blank"><i class="fa fa-fw fa-stack-overflow"></i> Stackoverflow</a>
  
  
  <a href="http://www.pinterest.com/polettix" class="author-social" target="_blank"><i class="fa fa-fw fa-pinterest"></i> Pinterest</a>
  
  
  
  
  
  
</div>

  </div>
  <article class="post">
    <div class="headline-wrap">
      
        <h1><a href="/wrapperl/" rel="bookmark" title="Wrapper...l">Wrapper...l</a></h1>
      
    </div><!--/ .headline-wrap -->
    <div class="article-wrap">
      <p><code>wrapperl</code> is a (Perl) program lets you wrap another Perl program
with some local-specific configurations.</p>

<p>Why would you do this, e.g. as opposed to modifying the
<em>hash-bang</em> line or setting <code>PERL5LIB</code>, or calling the perl
executable directly? Well, lazyness of course, but also the fact
that in different environments the same program might need different
configurations, and changing those configurations possibly in many
little Perl programs quickly becomes an error-prone hassle.</p>

<p><code>wrapperl</code> provides you with a consistent, minimal and easy to setup
way to concentrate local-specific configurations in
<code>wrapperl.env</code> file, and be sure
that you will call your Perl program(s) with the right setup every time.</p>

<p>This article contains only a brief extract from the documentation to
get your feet wet; you can find the whole thing on
<a href="https://github.com/polettix/wrapperl">the GitHub repository</a>.</p>

<h2 id="installing">Installing</h2>

<p>Installion is easy: download <code>wrapperl</code> from <a href="https://raw.githubusercontent.com/polettix/wrapperl/master/wrapperl">here</a>
and put it somewhere in the environment(s) where you need it. It is not
necessary to put it in a directory in the <code>PATH</code>, although it is
suggested in order to access all functionalities.</p>

<h2 id="a-complete-example">A Complete Example</h2>

<p>Sometimes an example is worth a thousands manuals.</p>

<h3 id="a-few-assumptions">A few assumptions</h3>

<p>Let’s make a few assumptions:</p>

<ul>
  <li>you will write your program <code>prg.pl</code>. If
you don’t even want to write one, you can copy and paste this:</li>
</ul>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c">#!/usr/bin/env perl</span>
print <span class="s2">&quot;using perl &#39;$^X&#39;, \@INC contains:\n&quot;</span><span class="p">;</span>
print <span class="s2">&quot;- &#39;$_&#39;\n&quot;</span> <span class="k">for</span> @INC<span class="p">;</span></code></pre></div>

<ul>
  <li>you do your coding in a development environment where:
    <ul>
      <li>you develop <code>prg.pl</code> inside directory <code>/home/me/program</code></li>
      <li><code>perl</code> is located at <code>/home/me/perl/bin/perl</code></li>
      <li>the libraries you need are stored in non-standard positions
  <code>/path/to/some/lib</code> and <code>/path/to/another/lib</code></li>
    </ul>
  </li>
  <li>you deploy your program in a production environment with a different
setup, namely:
    <ul>
      <li>your program <code>prg.pl</code> is deployed in directory <code>/app/program</code></li>
      <li><code>perl</code> is located at <code>/approved/perl/bin/perl</code></li>
      <li>the libraries you need are all stored in <code>/approved/lib</code></li>
    </ul>
  </li>
</ul>

<p>This is what how you start in the development environment:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">me@devhost /home/me/program<span class="nv">$ </span>ls -l
-rwxr-xr-x <span class="m">1</span> me me <span class="m">74</span> Apr <span class="m">23</span> 22:28 prg.pl</code></pre></div>

<p>This is what how you start in the production environment:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">me@production /app/program<span class="nv">$ </span>ls -l
-rwxr-xr-x <span class="m">1</span> me me <span class="m">74</span> Apr <span class="m">25</span> 20:51 prg.pl</code></pre></div>

<h3 id="step-1-symlink-to-wrapperl">Step 1: symlink to <code>wrapperl</code></h3>

<p>In both environments, you create a symbolic link named <code>prg</code>
pointing towards <code>wrapperl</code>. The link is located inside the same
directory as <code>prg.pl</code>.</p>

<p>This is what you end up with in the development environment:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">me@devhost /home/me/program<span class="nv">$ </span>ls -l
lrwxrwxrwx <span class="m">1</span> me me  <span class="m">8</span> Apr <span class="m">23</span> 22:51 prg -&gt; /home/me/bin/wrapperl
-rwxr-xr-x <span class="m">1</span> me me <span class="m">74</span> Apr <span class="m">23</span> 22:28 prg.pl</code></pre></div>

<p>This is what you have in the production environment:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">me@production /app/program<span class="nv">$ </span>ls -l
lrwxrwxrwx <span class="m">1</span> me me  <span class="m">8</span> Apr <span class="m">25</span> 20:51 prg -&gt; /usr/local/bin/wrapperl
-rwxr-xr-x <span class="m">1</span> me me <span class="m">74</span> Apr <span class="m">25</span> 20:51 prg.pl</code></pre></div>

<h3 id="step-2-create-wrapperlenv-files">Step 2: create <code>wrapperl.env</code> files</h3>

<p>In each environment (development and production in our example)
You create the <code>wrapperl.env</code> file, which will hold configurations
that are specific for the environment it is located into.
We will put it in the same directory as <code>prg</code> and <code>prg.pl</code>.</p>

<p><code>wrapperl.env</code> is a standard Perl file, where you can:</p>

<ul>
  <li>set the environment variable <code>PERL5LIB</code> to point towards the
library paths you need for loading your modules, and</li>
  <li>set a specific perl binary by means of the <code>$PERL</code> variable</li>
</ul>

<p>For our example, this is what you end up with in the development
environment:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">me@devhost /home/me/program<span class="nv">$ </span>ls -l
lrwxrwxrwx <span class="m">1</span> me me  <span class="m">8</span> Apr <span class="m">23</span> 22:51 prg -&gt; /home/me/bin/wrapperl
-rwxr-xr-x <span class="m">1</span> me me <span class="m">74</span> Apr <span class="m">23</span> 22:28 prg.pl
-rwxr-xr-x <span class="m">1</span> me me <span class="m">90</span> Apr <span class="m">22</span> 12:35 wrapperl.env

me@devhost /home/me/program<span class="nv">$ </span>cat wrapperl.env
<span class="nv">$ENV</span><span class="o">{</span>PERL5LIB<span class="o">}</span> <span class="o">=</span> <span class="s1">&#39;/path/to/some/lib:/path/to/another/lib&#39;</span><span class="p">;</span>
<span class="nv">$PERL</span> <span class="o">=</span> <span class="s1">&#39;/home/me/perl/bin/perl&#39;</span><span class="p">;</span></code></pre></div>

<p>This is what you have in the production environment:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">me@production /app/program<span class="nv">$ </span>ls -l
lrwxrwxrwx <span class="m">1</span> me me  <span class="m">8</span> Apr <span class="m">25</span> 20:51 prg -&gt; /usr/local/bin/wrapperl
-rwxr-xr-x <span class="m">1</span> me me <span class="m">74</span> Apr <span class="m">25</span> 20:51 prg.pl
-rwxr-xr-x <span class="m">1</span> me me <span class="m">66</span> Apr <span class="m">25</span> 20:51 wrapperl.env

me@production /app/program<span class="nv">$ </span>cat wrapperl.env
<span class="nv">$ENV</span><span class="o">{</span>PERL5LIB<span class="o">}</span> <span class="o">=</span> <span class="s1">&#39;/approved/lib&#39;</span><span class="p">;</span>
<span class="nv">$PERL</span> <span class="o">=</span> <span class="s1">&#39;/approved/perl/bin/perl&#39;</span><span class="p">;</span></code></pre></div>

<p>So yes, they two setups are mostly the same, except for the contents
of the <code>wrapperl.env</code> files, each containing configurations that
are environment-specific.</p>

<h3 id="step-3-use-the-symlinks">Step 3: use the symlinks</h3>

<p>Now, you are ready to run your program in either environment, just
remember to execute the symbolic link to <code>wrapperl</code> instead of your
program.</p>

<p>In the development environment:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">me@devhost /home/me/program<span class="nv">$ </span>./prg
using perl <span class="s1">&#39;/home/me/perl/bin/perl&#39;</span>, @INC contains:
- <span class="s1">&#39;/path/to/another/lib/i686-linux&#39;</span>
- <span class="s1">&#39;/path/to/another/lib&#39;</span>
- <span class="s1">&#39;/path/to/some/lib/i686-linux&#39;</span>
- <span class="s1">&#39;/path/to/some/lib&#39;</span>
- <span class="s1">&#39;/home/me/perl/lib/site_perl/5.18.1/i686-linux&#39;</span>
- <span class="s1">&#39;/home/me/perl/lib/site_perl/5.18.1&#39;</span>
- <span class="s1">&#39;/home/me/perl/lib/5.18.1/i686-linux&#39;</span>
- <span class="s1">&#39;/home/me/perl/lib/5.18.1&#39;</span>
- <span class="s1">&#39;.&#39;</span></code></pre></div>

<p>In the production environment:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">me@production /app/program<span class="nv">$ </span>./prg
using perl <span class="s1">&#39;/approved/perl/bin/perl&#39;</span>, @INC contains:
- <span class="s1">&#39;/approved/lib/i686-linux&#39;</span>
- <span class="s1">&#39;/approved/lib&#39;</span>
- <span class="s1">&#39;/approved/perl/lib/site_perl/5.18.1/i686-linux&#39;</span>
- <span class="s1">&#39;/approved/perl/lib/site_perl/5.18.1&#39;</span>
- <span class="s1">&#39;/approved/perl/lib/5.18.1/i686-linux&#39;</span>
- <span class="s1">&#39;/approved/perl/lib/5.18.1&#39;</span>
- <span class="s1">&#39;.&#39;</span></code></pre></div>

<h2 id="can-you-path">Can you <code>PATH</code>?</h2>

<p>If you can put <code>wrapperl</code> somewhere in the path (or in the same
location in every environment), you can even spare the symbolic
link. Just point the <em>hash-bang</em> to <code>wrapperl</code> and you’re done:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c">#!/usr/bin/env wrapperl</span>
print <span class="s2">&quot;using perl &#39;$^X&#39;, \@INC contains:\n&quot;</span><span class="p">;</span>
print <span class="s2">&quot;- &#39;$_&#39;\n&quot;</span> <span class="k">for</span> @INC<span class="p">;</span></code></pre></div>

<p>As an added bonus of this approach, you can even name the program
whatever you like!</p>

<h2 id="where-do-we-go-from-here">Where Do We Go From Here?</h2>

<p>I can’t say that we have only scratched the surface, because the
example above covers the main use case for <code>wrapperl</code>. On the other
hand, it is true that it can offer more, namely:</p>

<ul>
  <li>an easy way to call <code>perl</code> based on the configurations found
in <code>wrapperl.env</code></li>
  <li>an easy way to call <code>perldoc</code> in a similar way, which of course
allows you to access the documentation of the modules installed
in the local libraries</li>
  <li>a way to figure out which <code>wrapperl.env</code> file is in use for a
specific symlink</li>
</ul>

<p>and probably something more. You can read the full documentation
<a href="http://wrapperl.polettix.it">here</a> and peruse/fork the code repository
at <a href="https://github.com/polettix/wrapperl">wrapperl’s GitHub repository</a>.</p>

<p>For now… That’s all folks!</p>

<h2 id="updates">Updates</h2>

<p>Added section <em>Can you PATH?</em> on 2015-04-26.</p>

      <hr />
      <footer role="contentinfo">
        <div class="social-share">
  <h4>Share on</h4>
  <ul>
    <li>
      <a href="https://twitter.com/intent/tweet?text=/wrapperl/" class="twitter" title="Share on Twitter"><i class="fa fa-twitter"></i><span> Twitter</span></a>
    </li>
    <li>
      <a href="https://www.facebook.com/sharer/sharer.php?u=/wrapperl/" class="facebook" title="Share on Facebook"><i class="fa fa-facebook"></i><span> Facebook</span></a>
    </li>
    <li>
      <a href="https://plus.google.com/share?url=/wrapperl/" class="google-plus" title="Share on Google Plus"><i class="fa fa-google-plus"></i><span> Google+</span></a>
    </li>
  </ul>
</div><!-- /.social-share -->
        <p class="byline"><strong>Wrapper...l</strong> was published on <time datetime="2015-04-26T00:00:00+02:00">April 26, 2015</time>.</p>
      </footer>
    </div><!-- /.article-wrap -->
  
    <section id="disqus_thread"></section><!-- /#disqus_thread -->
  
  </article>
</div><!-- /#main -->

<div class="footer-wrap">
  <div class="related-articles">
  <h4>You might also enjoy <small class="pull-right">(<a href="/posts/">View all posts</a>)</small></h4>
    <ul>
    
      <li><a href="/a-simple-telegram-bot/" title="A Simple Telegram Bot">A Simple Telegram Bot</a></li>
    
      <li><a href="/some-maths-for-dobble/" title="Some Maths for Dobble">Some Maths for Dobble</a></li>
    
      <li><a href="/telegram-keyboard-button-encoding/" title="Telegram Keyboard Button Encoding">Telegram Keyboard Button Encoding</a></li>
    
    </ul>
    <hr />
  </div><!-- /.related-articles -->
  <footer>
    

<span>&copy; 2018 Flavio Poletti. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="http://mademistakes.com/minimal-mistakes/" rel="nofollow">Minimal Mistakes</a> theme.</span>

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>


  
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'polettix'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>



</body>
</html>
