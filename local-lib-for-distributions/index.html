<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>local::lib for distributions &#8211; PolettiX!</title>
<meta name="description" content="local::lib is a love-it-or-hate-it module, with the additional feature
that you don’t get the hate-it part.

">
<meta name="keywords" content="">



<!-- Twitter Cards -->
<meta name="twitter:title" content="local::lib for distributions">
<meta name="twitter:description" content="local::lib is a love-it-or-hate-it module, with the additional feature
that you don’t get the hate-it part.

">
<meta name="twitter:site" content="@polettix">
<meta name="twitter:creator" content="@polettix">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="/images/tramonto.jpg">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="local::lib for distributions">
<meta property="og:description" content="local::lib is a love-it-or-hate-it module, with the additional feature
that you don’t get the hate-it part.

">
<meta property="og:url" content="/local-lib-for-distributions/">
<meta property="og:site_name" content="PolettiX!">





<link rel="canonical" href="/local-lib-for-distributions/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="PolettiX! Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
	<script src="/assets/js/vendor/html5shiv.min.js"></script>
	<script src="/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<link href='//fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700%7CPT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico?whatever">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png?whatever">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="post">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="/">PolettiX!</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" id="site-nav" class="nav">
		    <ul>
		        
				    
				        
				    
				    <li><a href="/about/" >About</a></li>
				
				    
				        
				    
				    <li><a href="/posts/" >Posts</a></li>
				
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->


  <div class="image-wrap">
  <img src=
    
      "/images/tramonto.jpg"
    
  alt="local::lib for distributions feature image">
  
    <span class="image-credit"><a href="https://en.wikipedia.org/wiki/Australia">Tramonto in Australia</a></span>
  
  </div><!-- /.image-wrap -->


<div id="main" role="main">
  <div class="article-author-side">
    


<div itemscope itemtype="http://schema.org/Person">


	<img src="/images/flavio-self-color.png" class="bio-photo" alt="Flavio Poletti bio photo">


  <h3 itemprop="name">Flavio Poletti</h3>
  <p>Irreducible Perler.</p>
  <a href="mailto:flavio@polettix.it" class="author-social" target="_blank"><i class="fa fa-fw fa-envelope-square"></i>Email</a>
  <a href="http://comics.polettix.it/" class="author-social" target="_blank"><i class="fa fa-fw fa-pencil"></i> Comics</a>
  <a href="http://twitter.com/polettix" class="author-social" target="_blank"><i class="fa fa-fw fa-twitter-square"></i> Twitter</a>
  
  
  <a href="http://linkedin.com/in/flaviopoletti" class="author-social" target="_blank"><i class="fa fa-fw fa-linkedin-square"></i> LinkedIn</a>
  
  
  <a href="https://metacpan.org/author/polettix" class="author-social" target="_blank"><i class="fa fa-fw fa-th-large"></i> MetaCPAN</a>
  <a href="http://github.com/polettix" class="author-social" target="_blank"><i class="fa fa-fw fa-github"></i> Github</a>
  <a href="http://stackoverflow.com/users/3865403/polettix" class="author-social" target="_blank"><i class="fa fa-fw fa-stack-overflow"></i> Stackoverflow</a>
  
  
  <a href="http://www.pinterest.com/polettix" class="author-social" target="_blank"><i class="fa fa-fw fa-pinterest"></i> Pinterest</a>
  
  
  
  
  
  
</div>

  </div>
  <article class="post">
    <div class="headline-wrap">
      
        <h1><a href="/local-lib-for-distributions/" rel="bookmark" title="local::lib for distributions">local::lib for distributions</a></h1>
      
    </div><!--/ .headline-wrap -->
    <div class="article-wrap">
      <p><a href="https://metacpan.org/pod/local::lib">local::lib</a> is a love-it-or-hate-it module, with the additional feature
that you don’t get the hate-it part.</p>

<p>Recently, I had to develop a script to do a couple of HTTP redirections.
I headed towards CPAN, quickly found that <a href="https://metacpan.org/pod/HTTP::Server::Simple">HTTP::Server::Simple</a> (and in
particular <a href="https://metacpan.org/pod/HTTP::Server::Simple::CGI">HTTP::Server::Simple::CGI</a>) and in some twenty minutes I had a
working prototype. Forget that I changed my mind a couple of times
before having what I eventually used for my test…</p>

<p>Now, I knew I had to go into an environment that could possibly prevent
me from using my machine to perform the test. As a matter of fact, I
didn’t know whether I could use the program anywhere, let alone know
what kind of Perl environment I would have found. Nightmare!</p>

<p>Luckily enough, it turned out that I only needed modules that do not
require compilation. I love Pure Perl modules! So now I had the problem
to bundle all the needed non-core modules in a way that was convenient
to deliver. This is where <a href="https://metacpan.org/pod/local::lib">local::lib</a> really saved the day,
and in particular its <code>--self-contained</code> option. Well - yes -
I’ve seen options that were commented way better… but at least the
only reference in the synopsis made me curious enough to discover that
it was hitting the nail right in the head.</p>

<p>On my machine I have my own compiled Perl version to tinker with, so I
installed <a href="https://metacpan.org/pod/local::lib">local::lib</a> without the need to bootstrap anything. At this
point, all I had to do was something along these lines:</p>

<div class="highlight"><pre><code class="language-text" data-lang="text">shell$ perl -MCPAN -Mlocal::lib=--self-contained,my_lib -e &#39;CPAN::install($_) for @ARGV&#39; HTTP::Server::Simple URI Log::Log4perl</code></pre></div>

<p>Yes… I’m quite fond of <code>Log::Log4perl</code>, but that’s another story.</p>

<p>The installation above went smooth and installed all the modules, and
their needed <em>non-core</em> dependencies, under the directory tree starting
from <code>my_lib</code>. I checked that there were actually no compiled components
- dependencies could play some trick - and I verified that I had been
lucky. Yay!</p>

<p>The directory structure you end up with is more or less the following:</p>

<div class="highlight"><pre><code class="language-text" data-lang="text">my_lib/bin
my_lib/lib/perl5/...
my_lib/man</code></pre></div>

<p>I didn’t need either the bin or the man subdirectory, so I just moved
the contents <code>my_lib/lib/perl5</code> into a <code>lib</code> subdirectory, removed what
remained of <code>my_lib</code> and… that’s it! Well, wait a minute, I had to
make a slight change to the code as well:</p>

<div class="highlight"><pre><code class="language-text" data-lang="text">#...
use FindBin;
use lib $FindBin::Bin;</code></pre></div>

<p>OK, now <em>that’s it</em>! The funny part? I was actually able to use my
laptop, so I didn’t need anything of this…</p>

      <hr />
      <footer role="contentinfo">
        <div class="social-share">
  <h4>Share on</h4>
  <ul>
    <li>
      <a href="https://twitter.com/intent/tweet?text=/local-lib-for-distributions/" class="twitter" title="Share on Twitter"><i class="fa fa-twitter"></i><span> Twitter</span></a>
    </li>
    <li>
      <a href="https://www.facebook.com/sharer/sharer.php?u=/local-lib-for-distributions/" class="facebook" title="Share on Facebook"><i class="fa fa-facebook"></i><span> Facebook</span></a>
    </li>
    <li>
      <a href="https://plus.google.com/share?url=/local-lib-for-distributions/" class="google-plus" title="Share on Google Plus"><i class="fa fa-google-plus"></i><span> Google+</span></a>
    </li>
  </ul>
</div><!-- /.social-share -->
        <p class="byline"><strong>local::lib for distributions</strong> was published on <time datetime="2010-07-30T00:00:00+02:00">July 30, 2010</time>.</p>
      </footer>
    </div><!-- /.article-wrap -->
  
  </article>
</div><!-- /#main -->

<div class="footer-wrap">
  <div class="related-articles">
  <h4>You might also enjoy <small class="pull-right">(<a href="/posts/">View all posts</a>)</small></h4>
    <ul>
    
      <li><a href="/a-simple-telegram-bot/" title="A Simple Telegram Bot">A Simple Telegram Bot</a></li>
    
      <li><a href="/some-maths-for-dobble/" title="Some Maths for Dobble">Some Maths for Dobble</a></li>
    
      <li><a href="/telegram-keyboard-button-encoding/" title="Telegram Keyboard Button Encoding">Telegram Keyboard Button Encoding</a></li>
    
    </ul>
    <hr />
  </div><!-- /.related-articles -->
  <footer>
    

<span>&copy; 2018 Flavio Poletti. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="http://mademistakes.com/minimal-mistakes/" rel="nofollow">Minimal Mistakes</a> theme.</span>

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>



</body>
</html>
